## Week 2 Self‑Evaluation (Trip Management & Search)

### Context
- Backend: NestJS modules for trips, seats, buses, routes (`backend/src/modules/*`). Trip creation validates route/bus existence and scheduling conflicts, then auto-creates seat statuses (`backend/src/modules/trip/trip.service.ts`, `trip-validation.provider.ts`, `seat-status-generator.provider.ts`). Buses now include `busType` and amenities JSON, and seeds populate operators, routes, buses, seats, trips, and seat statuses.
- Frontend: React + Vite with admin pages for routes/buses/trips and a protected landing/search flow (`frontend/src/App.tsx`). Search results consume the real `/trips/search` API and navigate to a trip detail page (`frontend/src/pages/search/SearchResults.tsx`, `TripDetails.tsx`).
- Several admin-facing frontend services still target endpoints that the backend does not expose (e.g., `/buses/*assign*`, `/admin/routes`), so those flows remain broken.

### Requirement-by-requirement check
- **Admin trip scheduling interface** — Partial. Admin endpoints exist for create/list/update/cancel trips and enforce bus conflict checks (`backend/src/modules/trip/trip.controller.ts`, `trip.service.ts`). Admin UI provides a CRUD form (`frontend/src/pages/admin/TripsPage.tsx`) but calls `/trips` instead of `/admin/trips`, so it won’t hit the protected backend routes.
- **Bus assignment & scheduling logic** — Partial. Trip creation/update checks for overlapping bus schedules (`backend/src/modules/trip/providers/trip-validation.provider.ts`), but there is no bus-assignment model or endpoints (`backend/src/modules/bus/bus.controller.ts` is empty). Frontend assignment UI (`frontend/src/pages/admin/BusesPage.tsx`) calls non-existent `/buses/*assign*` APIs.
- **Route configuration with pickup/dropoff points** — Missing. Entities exist (`backend/src/modules/route/entities/route.entity.ts`, `route-point.entity.ts`), yet the admin controller is commented out (`backend/src/modules/admin-routes/admin-routes.controller.ts`) and there are no create/update routes for points. Frontend routes page (`frontend/src/pages/admin/RoutesPage.tsx`) uses `/admin/routes`/`/routes` endpoints that are absent.
- **Seat map configuration tool** — Missing. Seat CRUD is exposed only for simple seat records (`backend/src/modules/seat/seat.controller.ts`); no seat layout or pricing editor. Frontend seat-map UI (`frontend/src/pages/admin/BusesPage.tsx`) depends on `/buses/*seat-map*` APIs that are not implemented server-side.
- **Trip search API with filtering** — Partial. `TripService.searchTrips` now returns data from `/trips/search` with from/to/date/passengers filters and available-seat checks; amenities are parsed from seeded buses. Advanced filters (price/time slots/bus type/amenities) and sorting remain unimplemented on the backend.
- **Search interface with autocomplete for cities** — Partial. Landing page has a static `<Select>` city list and validation (`frontend/src/pages/home/LandingPage.tsx`), but no autocomplete or API-backed suggestions; page is behind auth via `ProtectedRoute`, not public.
- **Advanced filtering (time, price, bus type, amenities)** — Partial. UI toggles exist and client-side filtering is applied in `frontend/src/pages/search/SearchResults.tsx`, but backend query params for these filters are not used; results are filtered locally only.
- **Search result sorting & pagination** — Partial. Client-side sorting/pagination is implemented over the in-memory result set in `SearchResults.tsx`; backend does not paginate or sort.
- **Responsive landing page with search form** — Partial. `frontend/src/pages/home/LandingPage.tsx` is responsive and validates inputs, but lacks autocomplete and anonymous access; search params simply redirect to `/search`.
- **Trip search results interface** — Partial. `frontend/src/pages/search/SearchResults.tsx` now calls the live `/trips/search` API, renders cards, and supports client-side filters/sorting/pagination. Still protected by auth and dependent on backend data shape.
- **Trip details page** — Met (data shape). `TripService.getTripDetails` resolves `/trips/:id` with route points and amenities; frontend detail page at `/search/:id` renders the full trip info with booking summary placeholder.
- **Database indexes for search** — Missing. Entities index IDs (`routeId`, `busId`, etc.) but not `origin`, `destination`, or `departureTime` columns needed for search performance.
- **Caching for popular routes** — Missing. No Redis/configured caching layer.
- **Database connection pooling** — Missing. TypeORM uses defaults; no explicit pooling config tuned for concurrency.

### Overall assessment
Trip creation with seat-status seeding and bus conflict checks is in place, and search/detail APIs now return seeded trips consumed by the search results and new trip detail page. However, admin route/bus/seat-map endpoints are still absent, advanced search filters/sorting/pagination are only client-side, and admin UI services remain misaligned with backend paths. End-to-end admin management is still blocked; user search flows work only against the limited seeded dataset.

### Next steps
1) Implement `TripService.searchTrips`/`getTripDetail` using `TripSearchProvider`, compute available seats, and align DTOs with frontend schemas. 2) Expose real admin routes/buses/seat-map endpoints (or update FE services to existing APIs) and secure them with admin roles. 3) Wire frontend search filtering/sorting/pagination to API params and add a trip detail page that consumes `/trips/:id`. 4) Add DB indexes on route origin/destination/departure time, and plan caching/connection pooling for search-heavy queries.
